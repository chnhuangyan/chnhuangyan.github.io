window.__require=function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var u="function"==typeof __require&&__require;if(!a&&u)return u(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){return n(e[s][1][t]||t)},d,d.exports,t,e,o,i)}return o[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({End:[function(t,e,o){"use strict";cc._RF.push(e,"5a584EW3adIAIhXswDg5WsO","End"),cc.Class({extends:cc.Component,properties:{collider:cc.BoxCollider},start:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0},onCollisionEnter:function(t,e){document.cookie="SelfControlPass=1;Path=/"},onLoad:function(){document.cookie="SelfControlPass=0;Path=/"}}),cc._RF.pop()},{}],JoystickEnum:[function(t,e,o){"use strict";cc._RF.push(e,"29753pvkBhLc5rN/SCpZBwE","JoystickEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={JoystickType:cc.Enum({FIXED:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0}),SpeedType:cc.Enum({STOP:0,NORMAL:1,FAST:2}),JoystickEventType:cc.Enum({TOUCH_START:"touchStart",TOUCH_MOVE:"touchMove",TOUCH_END:"touchEnd",CHANGE_JOYSTICK_TYPE:"changeJoystickType"})},e.exports=o.default,cc._RF.pop()},{}],JoystickEvent:[function(t,e,o){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}cc._RF.push(e,"96bc3M2TwxGabIeDD4rOmQc","JoystickEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc.Class({properties:{_event:null},ctor:function(){this._event=new cc.EventTarget},on:function(t,e,o){this._event.on(t,e,o)},off:function(t,e,o){this._event.off(t,e,o)},emit:function(t){for(var e,o=arguments.length,n=Array(o>1?o-1:0),c=1;c<o;c++)n[c-1]=arguments[c];(e=this._event).emit.apply(e,[t].concat(i(n)))}}),c=null;n.getInstance=function(){return!c&&(c=new n),c},o.default=n,e.exports=o.default,cc._RF.pop()},{}],Joystick:[function(t,e,o){"use strict";cc._RF.push(e,"965d6+vAp1OAajGemdUBWK+","Joystick");var i=c(t("JoystickEnum")),n=c(t("JoystickEvent"));function c(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"Dot",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"},ring:{default:null,type:cc.Node,displayName:"Ring",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"},joystickType:{default:i.default.JoystickType.FIXED,type:i.default.JoystickType,displayName:"Touch Type",tooltip:"\u89e6\u6478\u7c7b\u578b"},directionType:{default:i.default.DirectionType.ALL,type:i.default.DirectionType,displayName:"Direction Type",tooltip:"\u65b9\u5411\u7c7b\u578b"},_stickPos:{default:null,type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"},_touchLocation:{default:null,type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"}},onLoad:function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType===i.default.JoystickType.FOLLOW&&(this.node.opacity=0)},onEnable:function(){n.default.getInstance().on(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},onDisable:function(){n.default.getInstance().off(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},_onChangeJoystickType:function(t){this.joystickType=t,this.node.opacity=t===i.default.JoystickType.FIXED?255:0},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function(t){n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_START,"joystick touch start",10);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.joystickType===i.default.JoystickType.FIXED){this._stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition()).mag();this._radius>o&&this.dot.setPosition(e)}else this.joystickType===i.default.JoystickType.FOLLOW&&(this._stickPos=e,this.node.opacity=255,this._touchLocation=t.getLocation(),this.ring.setPosition(e),this.dot.setPosition(e))},_touchMoveEvent:function(t){if(this.joystickType===i.default.JoystickType.FOLLOW&&this._touchLocation===t.getLocation())return!1;var e=this.ring.convertToNodeSpaceAR(t.getLocation()),o=e.mag(),c=this._stickPos.x+e.x,s=this._stickPos.y+e.y,a=cc.v2(c,s).sub(this.ring.getPosition()).normalize(),r=void 0;if(this._radius>o)this.dot.setPosition(cc.v2(c,s)),r=i.default.SpeedType.NORMAL;else{var u=this._stickPos.x+a.x*this._radius,d=this._stickPos.y+a.y*this._radius;this.dot.setPosition(cc.v2(u,d)),r=i.default.SpeedType.FAST}n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_MOVE,t,{speedType:r,moveDistance:a})},_touchEndEvent:function(t){this.dot.setPosition(this.ring.getPosition()),this.joystickType===i.default.JoystickType.FOLLOW&&(this.node.opacity=0),n.default.getInstance().emit(i.default.JoystickEventType.TOUCH_END,t,{speedType:i.default.SpeedType.STOP})}}),cc._RF.pop()},{JoystickEnum:"JoystickEnum",JoystickEvent:"JoystickEvent"}],ObstacleCollider:[function(t,e,o){"use strict";cc._RF.push(e,"7d35evogZZMF6sMbxhZtL8Y","ObstacleCollider"),cc.Class({extends:cc.Component,properties:{collider:cc.BoxCollider},start:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){}}),cc._RF.pop()},{}],ObstacleTips:[function(t,e,o){"use strict";cc._RF.push(e,"91973akhiZIlai5/6Wyaca4","ObstacleTips"),cc.Class({extends:cc.Component,properties:{collider:cc.BoxCollider,player:cc.Node,anim:cc.Animation,mysound:cc.AudioSource},start:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){0==Globals.isplaying&&(document.cookie="collision=1",this.player.opacity=255,this.anim.play("tips",0),this.mysound.play("Mod04_GamePopUp",0),Globals.gameControl=0,this.anim.scheduleOnce(function(){Globals.gameControl=1,Globals.isplaying=0},3),Globals.isplaying=1)}}),cc._RF.pop()},{}],PlayerPhysics:[function(t,e,o){"use strict";cc._RF.push(e,"f20adps2YtC7JOk73yL40dO","PlayerPhysics");var i=c(t("./joystick/JoystickEnum")),n=c(t("./joystick/JoystickEvent"));function c(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{moveDir:{default:cc.v2(0,1),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.default.SpeedType.STOP,displayName:"Speed Type",type:i.default.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:0,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},normalSpeed:{default:100,type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"},fastSpeed:{default:200,type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"},_body:cc.RigidBody},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,this._body=this.node.getComponent(cc.RigidBody),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_START,this.onTouchStart,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_MOVE,this.onTouchMove,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_END,this.onTouchEnd,this)},onTouchStart:function(){},onTouchMove:function(t,e){this._speedType=e.speedType,this.moveDir=e.moveDistance},onTouchEnd:function(t,e){this._speedType=e.speedType},move:function(){this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-90,this._body.applyForceToCenter(cc.v2(200*this.moveDir.x,200*this.moveDir.y),!0)},update:function(t){switch(this._speedType){case i.default.SpeedType.STOP:this._body.linearVelocity=cc.v2(0,0),this._moveSpeed=this.stopSpeed;break;case i.default.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case i.default.SpeedType.FAST:this._moveSpeed=this.fastSpeed}this._speedType!==i.default.SpeedType.STOP&&this.move()}}),cc._RF.pop()},{"./joystick/JoystickEnum":"JoystickEnum","./joystick/JoystickEvent":"JoystickEvent"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"8dd32uLvGJJ6b6GLXsJqGwx","Player");var i=c(t("./joystick/JoystickEnum")),n=c(t("./joystick/JoystickEvent"));function c(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{ismove:1,ontouch:0,lockangel:0,moveDir:{default:cc.v2(0,1),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.default.SpeedType.STOP,displayName:"Speed Type",type:i.default.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:0,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},normalSpeed:{default:100,type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"},fastSpeed:{default:200,type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"},collider:cc.CircleCollider},onLoad:function(){n.default.getInstance().on(i.default.JoystickEventType.TOUCH_START,this.onTouchStart,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_MOVE,this.onTouchMove,this),n.default.getInstance().on(i.default.JoystickEventType.TOUCH_END,this.onTouchEnd,this),cc.game.setFrameRate(60)},start:function(){cc.director.getCollisionManager().enabled=!0,cc.game.setFrameRate(60)},onCollisionEnter:function(t,e){1==Globals.keyboard_or_touch&&(this.ismove=0,this.node.y-=this.moveDir.mul(5).y,this.node.x-=this.moveDir.mul(5).x)},onCollisionStay:function(t,e){Globals.keyboard_or_touch},onCollisionExit:function(t,e){},onTouchStart:function(){Globals.keyboard_or_touch=1,this.ismove=1,this.ontouch=1},onTouchMove:function(t,e){this._speedType=e.speedType,this.moveDir=e.moveDistance},onTouchEnd:function(t,e){this._speedType=e.speedType,this.ontouch=0},move:function(){this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))+90,this.node.y+=this.moveDir.mul(this._moveSpeed/70).y,this.node.x+=this.moveDir.mul(this._moveSpeed/70).x},update:function(t){switch(this._speedType){case i.default.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case i.default.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case i.default.SpeedType.FAST:this._moveSpeed=this.fastSpeed}1==this.ismove&&1==this.ontouch&&1==Globals.gameControl&&this.move()}}),cc._RF.pop()},{"./joystick/JoystickEnum":"JoystickEnum","./joystick/JoystickEvent":"JoystickEvent"}],UI:[function(t,e,o){"use strict";cc._RF.push(e,"b578d4RwmNB97QPmxn2E0ls","UI");var i=c(t("./joystick/JoystickEnum")),n=c(t("./joystick/JoystickEvent"));function c(t){return t&&t.__esModule?t:{default:t}}cc.Class({extends:cc.Component,properties:{},onLoad:function(){},useFixedType:function(){n.default.getInstance().emit(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,i.default.JoystickType.FIXED)},useFollowType:function(){n.default.getInstance().emit(i.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,i.default.JoystickType.FOLLOW)}}),cc._RF.pop()},{"./joystick/JoystickEnum":"JoystickEnum","./joystick/JoystickEvent":"JoystickEvent"}],VRcontrolBar:[function(t,e,o){"use strict";cc._RF.push(e,"9b057Al3WBFjIIl3Azq0tz6","VRcontrolBar"),cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},maxSpeed:0},onLoad:function(){cc.debug.setDisplayStats(!1),this.joyStickBtn=this.node.children[0],this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this),this.dir=cc.v2(0,0)},onDestroy:function(){this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchmove",this.onTouchMove,this),this.node.off("touchend",this.onTouchEnd,this),this.node.off("touchcancel",this.onTouchCancel,this)},onTouchStart:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.joyStickBtn.setPosition(e)},onTouchMove:function(t){var e=t.getDelta();this.joyStickBtn.setPosition(this.joyStickBtn.position.add(e)),this.dir=this.joyStickBtn.position.normalize()},onTouchEnd:function(t){Globals.state=0,this.joyStickBtn.setPosition(cc.v2(0,0))},onTouchCancel:function(t){Globals.state=0,this.joyStickBtn.setPosition(cc.v2(0,0))},start:function(){},update:function(t){var e=this.joyStickBtn.position.mag()/(this.node.width/2);if(e>1&&this.joyStickBtn.setPosition(this.joyStickBtn.position.div(e)),0==Globals.state){var o=this.dir.mul(this.maxSpeed*e);Globals.Positionx=o.x,Globals.Positiony=o.y}}}),cc._RF.pop()},{}],button:[function(t,e,o){"use strict";cc._RF.push(e,"54e4bnIuRRPdaGb76EOV1Mi","button"),cc.Class({extends:cc.Component,properties:{tips:cc.Node,startclickcontrol:0,anim:cc.Animation,animArrows:cc.Animation,bgaudio:cc.AudioSource},start:function(){var t=this;this.anim.scheduleOnce(function(){t.settrue(1),t.animArrows.play("ArrowApear")},12),document.cookie="SelfControlStart=1;path=/"},buttoncontrol:function(){if(1==this.startclickcontrol){Globals.gameControl=1;var t=this;this.anim.scheduleOnce(function(){t.tips.destroy()},1),this.bgaudio.play(),this.node.destroy()}},settrue:function(t){this.startclickcontrol=t},touchbegan:function(t,e){return!0},update:function(t){}}),cc._RF.pop()},{}],dog_move:[function(t,e,o){"use strict";cc._RF.push(e,"e3a38n37qBMqIrE4n8HIpbW","dog_move"),cc.Class({extends:cc.Component,properties:{speed:0,up:0,down:0,left:0,right:0,currentRotation:0,collider:cc.CircleCollider,ismove:1,lockKey:0,key:0},start:function(){cc.director.getCollisionManager().enabled=!0},onCollisionEnter:function(t,e){0==Globals.keyboard_or_touch&&(this.ismove=0,this.node.y-=this.speed*this.up*4,this.node.y+=this.speed*this.down*4,this.node.x-=this.speed*this.right*4,this.node.x+=this.speed*this.left*4)},onCollisionExit:function(t,e){},onCollisionStay:function(t,e){0==Globals.keyboard_or_touch&&(this.ismove=0)},onLoad:function(){var t=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,o){switch(Globals.keyboard_or_touch=0,t.ismove=1,e){case cc.macro.KEY.left:1!=t.lockKey?(t.left=10,t.currentRotation=90,t.key=1,t.lockKey=0):t.left=0;break;case cc.macro.KEY.right:2!=t.lockKey?(t.right=10,t.currentRotation=-90,t.key=2,t.lockKey=0):t.right=0;break;case cc.macro.KEY.up:3!=t.lockKey?(t.up=10,t.currentRotation=180,t.key=3,t.lockKey=0):t.up=0;break;case cc.macro.KEY.down:4!=t.lockKey?(t.down=10,t.currentRotation=0,t.key=4,t.lockKey=0):t.down=0}},onKeyReleased:function(e,o){switch(t.ismove=1,e){case cc.macro.KEY.left:t.left=0,0!=t.up&&(t.currentRotation=180),0!=t.down&&(t.currentRotation=0),0!=t.right&&(t.currentRotation=-90);break;case cc.macro.KEY.right:t.right=0,0!=t.up&&(t.currentRotation=180),0!=t.down&&(t.currentRotation=0),0!=t.left&&(t.currentRotation=90);break;case cc.macro.KEY.up:t.up=0,0!=t.left&&(t.currentRotation=90),0!=t.down&&(t.currentRotation=0),0!=t.right&&(t.currentRotation=-90);break;case cc.macro.KEY.down:t.down=0,0!=t.up&&(t.currentRotation=180),0!=t.left&&(t.currentRotation=90),0!=t.right&&(t.currentRotation=-90)}}},t.node)},update:function(t){1==Globals.gameControl&&1==this.ismove&&0==Globals.keyboard_or_touch&&(this.node.y+=this.speed*this.up,this.node.y-=this.speed*this.down,this.node.x+=this.speed*this.right,this.node.x-=this.speed*this.left,0!=this.up&&0!=this.right?this.node.setRotation(-135):0!=this.up&&0!=this.left?this.node.setRotation(135):0!=this.down&&0!=this.right?this.node.setRotation(-45):0!=this.down&&0!=this.left?this.node.setRotation(45):this.node.setRotation(this.currentRotation))}}),cc._RF.pop()},{}],globalData:[function(t,e,o){"use strict";cc._RF.push(e,"dc103x/qIdINaryiMuvN7ux","globalData"),window.Globals={gameControl:0,Positionx:0,Positiony:0,state:0,isplaying:0,keyboard_or_touch:0},cc._RF.pop()},{}],global:[function(t,e,o){"use strict";cc._RF.push(e,"48d6bnxvLVK74/4tfGnhO9n","global"),cc.Class({extends:cc.Component,properties:{},start:function(){window.Global={backNode:null}}}),cc._RF.pop()},{}],loadsence:[function(t,e,o){"use strict";cc._RF.push(e,"c4841pCOFhCB5Y9vRLh6L69","loadsence"),cc.Class({extends:cc.Component,properties:{},start:function(){},loadsence:function(){cc.director.loadScene("sceneselfcontrol",!1)}}),cc._RF.pop()},{}],phy:[function(t,e,o){"use strict";cc._RF.push(e,"d9682sZ0LVKR4U+pfvsGnTk","phy"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0},start:function(){}}),cc._RF.pop()},{}],screencontrol:[function(t,e,o){"use strict";cc._RF.push(e,"e885dc65CBASpChCnAPqjpR","screencontrol"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(t){cc.view.setResizeCallback(function(){alert("sizeChange")})}}),cc._RF.pop()},{}],setOpacity:[function(t,e,o){"use strict";cc._RF.push(e,"ab42b3xu71O+5zzAp8/3Zkw","setOpacity"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(t){this.node.opacity}}),cc._RF.pop()},{}],startarrow:[function(t,e,o){"use strict";cc._RF.push(e,"0a2dbUg6l5NYYTUU3JKCK+H","startarrow"),cc.Class({extends:cc.Component,properties:{aduio:cc.AudioSource,anim:cc.Animation},start:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,function(t){this.anim.play("ArrowBig")},this)}}),cc._RF.pop()},{}]},{},["phy","End","ObstacleCollider","ObstacleTips","Player","PlayerPhysics","UI","VRcontrolBar","button","dog_move","global","globalData","Joystick","JoystickEnum","JoystickEvent","loadsence","screencontrol","setOpacity","startarrow"]);